(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[180],{8685:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/rooms-list",function(){return a(4696)}])},4696:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return j}});var i=a(5893),l=a(9008),n=a.n(l),t=a(1664),r=a.n(t),c=a(7294),o=a(1608);let d="https://uhxofvlffmkrlqvbisil.supabase.co",m="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVoeG9mdmxmZm1rcmxxdmJpc2lsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU0MzgxMDYsImV4cCI6MjA3MTAxNDEwNn0.ZQDbpQqWb8CVhAjWxdwPr3RH_wDQTChVDplQVd_NlEI",h=null;async function u(){let e=(h||d&&m&&(h=(0,o.eI)(d,m)),h);if(!e)return[];let{data:s,error:a}=await e.from("rooms").select("*").eq("visible",!0).order("price",{ascending:!0});return a?(console.error("Error fetching rooms:",a),[]):s||[]}var x=a(6455),p=a.n(x);function j(){let[e,s]=(0,c.useState)([]),[a,l]=(0,c.useState)(!0),[t,o]=(0,c.useState)(!1),[d,m]=(0,c.useState)(null),[h,x]=(0,c.useState)(null),[j,N]=(0,c.useState)(!1),[f,b]=(0,c.useState)({start_date:"",end_date:"",guests:"1",children:"0"});function g(){o(!1),m(null),x(null),b({start_date:"",end_date:"",guests:"1",children:"0"})}async function v(e){e.preventDefault(),x(null),N(!0);try{let s=new FormData(e.currentTarget),a=Object.fromEntries(s.entries());a.room_id=d;let i=await fetch("/api/booking",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),l=await i.json();if(x(l.message),i.ok){e.target.reset(),b({start_date:"",end_date:"",guests:"1",children:"0"});try{await p().fire({title:"Booking confirmed",text:l.message,icon:"success",confirmButtonText:"OK"})}catch(e){}g()}}catch(e){x("Error submitting booking. Please try again.")}finally{N(!1)}}(0,c.useEffect)(()=>{!async function(){l(!0),s(await u()),l(!1)}()},[]);let y=e.find(e=>e.id===d);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n(),{children:[(0,i.jsx)("title",{children:"Available Rooms | Epashikino Resort & Spa"}),(0,i.jsx)("meta",{name:"description",content:"Browse our premium rooms and book your stay at Epashikino Resort & Spa."})]}),(0,i.jsx)("main",{className:"listing-page",children:(0,i.jsxs)("div",{className:"listing-container",children:[(0,i.jsxs)("header",{className:"listing-header",children:[(0,i.jsx)("h1",{className:"listing-eyebrow",children:"Epashikino Resort & Spa"}),(0,i.jsx)("h2",{className:"listing-title",children:"Available Rooms & Suites"}),(0,i.jsx)("p",{className:"listing-subtitle",children:"Choose from our collection of comfortable and luxurious accommodations"})]}),(0,i.jsx)("section",{className:"stay-section","aria-label":"Available rooms",children:a?(0,i.jsx)("p",{className:"section-title",children:"Loading rooms..."}):0===e.length?(0,i.jsx)("p",{className:"section-title",children:"No rooms available at the moment."}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h3",{className:"section-heading",children:"Select Your Room"}),(0,i.jsx)("div",{className:"rooms-grid",children:e.map(e=>(0,i.jsxs)("article",{className:"room-card",children:[e.images&&e.images.length>0&&(0,i.jsx)("img",{className:"room-img",src:e.images[0],alt:e.name}),(0,i.jsxs)("div",{className:"room-info",children:[(0,i.jsx)("h4",{className:"room-title",children:e.name}),(0,i.jsx)("p",{className:"room-description",children:e.description}),(0,i.jsxs)("div",{className:"room-meta",children:[e.capacity&&(0,i.jsxs)("span",{className:"meta-item",children:[(0,i.jsx)("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:(0,i.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z",fill:"currentColor"})}),"Up to ",e.capacity," guests"]}),e.beds&&(0,i.jsxs)("span",{className:"meta-item",children:[(0,i.jsx)("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:(0,i.jsx)("path",{d:"M3 12h18M4 10h16a2 2 0 012 2v4H2v-4a2 2 0 012-2z",fill:"none",stroke:"currentColor",strokeWidth:"1.5"})}),e.beds," bed",e.beds>1?"s":""]}),e.size_m2&&(0,i.jsxs)("span",{className:"meta-item",children:[(0,i.jsx)("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:(0,i.jsx)("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",ry:"2",fill:"none",stroke:"currentColor",strokeWidth:"1.5"})}),e.size_m2," m\xb2"]})]}),e.amenities&&e.amenities.length>0&&(0,i.jsx)("ul",{className:"amenities-list",children:e.amenities.slice(0,6).map((e,s)=>(0,i.jsxs)("li",{className:"amenity-item",children:[(0,i.jsx)("svg",{viewBox:"0 0 24 24","aria-hidden":"true",children:(0,i.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z",fill:"currentColor"})}),e]},s))}),(0,i.jsxs)("div",{className:"room-footer",children:[(0,i.jsxs)("div",{className:"room-price",children:[(0,i.jsx)("span",{className:"price-label",children:"from"}),(0,i.jsxs)("span",{className:"price-amount",children:["$",e.price.toFixed(2)]}),(0,i.jsx)("span",{className:"price-period",children:"/night"})]}),(0,i.jsx)("button",{className:"btn btn-primary",type:"button",onClick:()=>{m(e.id),o(!0),x(null)},children:"Make your reservations"})]})]})]},e.id))})]})}),(0,i.jsx)("nav",{className:"listing-bottom-nav","aria-label":"Navigation",children:(0,i.jsx)(r(),{className:"btn btn-outline",href:"/",children:"Back to Home"})})]})}),t&&y&&(0,i.jsx)("div",{className:"modal-overlay",role:"dialog","aria-modal":"true","aria-label":"Booking form",onClick:g,children:(0,i.jsxs)("div",{className:"modal-panel",onClick:e=>e.stopPropagation(),children:[(0,i.jsxs)("header",{className:"modal-header",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{children:y.name}),(0,i.jsxs)("p",{className:"modal-subtitle",children:["$",y.price.toFixed(2)," per night"]})]}),(0,i.jsx)("button",{className:"modal-close","aria-label":"Close",onClick:g,children:"âœ•"})]}),(0,i.jsx)("div",{className:"modal-body",children:(0,i.jsxs)("form",{className:"form booking-form",onSubmit:v,children:[(0,i.jsxs)("div",{className:"form-section",children:[(0,i.jsx)("label",{className:"form-label",children:"Check-in Date *"}),(0,i.jsx)("input",{className:"input",type:"date",name:"start_date",required:!0,value:f.start_date,onChange:e=>b({...f,start_date:e.target.value})})]}),(0,i.jsxs)("div",{className:"form-section",children:[(0,i.jsx)("label",{className:"form-label",children:"Check-out Date *"}),(0,i.jsx)("input",{className:"input",type:"date",name:"end_date",required:!0,value:f.end_date,onChange:e=>b({...f,end_date:e.target.value})})]}),(0,i.jsxs)("div",{className:"form-row",children:[(0,i.jsxs)("div",{className:"form-section",children:[(0,i.jsx)("label",{className:"form-label",children:"Adults *"}),(0,i.jsx)("input",{className:"input",type:"number",name:"guests",min:"1",required:!0,value:f.guests,onChange:e=>b({...f,guests:e.target.value})})]}),(0,i.jsxs)("div",{className:"form-section",children:[(0,i.jsx)("label",{className:"form-label",children:"Children"}),(0,i.jsx)("input",{className:"input",type:"number",name:"children",min:"0",value:f.children,onChange:e=>b({...f,children:e.target.value})})]})]}),(0,i.jsxs)("div",{className:"form-section",children:[(0,i.jsx)("label",{className:"form-label",children:"Board Type"}),(0,i.jsxs)("select",{className:"input",name:"type",defaultValue:"Bed Only",children:[(0,i.jsx)("option",{value:"Bed Only",children:"Bed Only"}),(0,i.jsx)("option",{value:"Bed and Breakfast",children:"Bed and Breakfast"}),(0,i.jsx)("option",{value:"Half Board",children:"Half Board"}),(0,i.jsx)("option",{value:"Full Board",children:"Full Board"})]})]}),(0,i.jsxs)("div",{className:"form-section",children:[(0,i.jsx)("label",{className:"form-label",children:"First Name *"}),(0,i.jsx)("input",{className:"input",name:"first_name",placeholder:"First name",required:!0})]}),(0,i.jsxs)("div",{className:"form-section",children:[(0,i.jsx)("label",{className:"form-label",children:"Last Name *"}),(0,i.jsx)("input",{className:"input",name:"last_name",placeholder:"Last name",required:!0})]}),(0,i.jsxs)("div",{className:"form-section",children:[(0,i.jsx)("label",{className:"form-label",children:"Email *"}),(0,i.jsx)("input",{className:"input",type:"email",name:"email",placeholder:"Email",required:!0})]}),(0,i.jsxs)("div",{className:"form-section",children:[(0,i.jsx)("label",{className:"form-label",children:"Phone"}),(0,i.jsx)("input",{className:"input",name:"phone",placeholder:"Phone"})]}),(0,i.jsxs)("div",{className:"form-section",children:[(0,i.jsx)("label",{className:"form-label",children:"Special Requests"}),(0,i.jsx)("textarea",{className:"input",name:"notes",placeholder:"Any special requests...",rows:3})]}),(0,i.jsx)("button",{className:"btn btn-primary booking-btn",disabled:j,type:"submit",children:j?"Processing...":"Confirm Booking"}),h&&(0,i.jsx)("div",{className:"booking-status ".concat(h.includes("confirmed")||h.includes("Booking confirmed")?"success":"error"),children:h})]})})]})})]})}}},function(e){e.O(0,[166,608,888,774,179],function(){return e(e.s=8685)}),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[882],{2385:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/booking",function(){return s(1008)}])},1008:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return o}});var t=s(5893),i=s(9008),r=s.n(i),l=s(7294);let n=[{id:"1",name:"Deluxe Ocean View",capacity:2,beds:1,description:"Experience luxury with stunning ocean views. This spacious room features a king bed, marble bathroom, and a private balcony overlooking the sea.",images:["https://cdn.builder.io/api/v1/image/assets%2F7efc470fe57f4b95b600ae20623acb83%2F1966ee8babb94437812b351eb3246c8a?format=webp&width=800","https://cdn.builder.io/api/v1/image/assets%2F7efc470fe57f4b95b600ae20623acb83%2Ffa4d03405a5f4af6a0fb140a86159812?format=webp&width=800","https://cdn.builder.io/api/v1/image/assets%2F7efc470fe57f4b95b600ae20623acb83%2F1b6d237b133545e0a2545b1e1c9b39ec?format=webp&width=800"],amenities:["Ocean View","Air Conditioning","Free WiFi","Flat Screen TV","Mini Bar","Premium Toiletries"]},{id:"2",name:"Family Suite",capacity:4,beds:2,description:"Perfect for families and groups. Two bedrooms, spacious living area, and modern amenities for a comfortable stay.",images:["https://cdn.builder.io/api/v1/image/assets%2F7efc470fe57f4b95b600ae20623acb83%2Ffa4d03405a5f4af6a0fb140a86159812?format=webp&width=800","https://cdn.builder.io/api/v1/image/assets%2F7efc470fe57f4b95b600ae20623acb83%2F1966ee8babb94437812b351eb3246c8a?format=webp&width=800","https://cdn.builder.io/api/v1/image/assets%2F7efc470fe57f4b95b600ae20623acb83%2F9ae710d8f1ed4e49b9b727c33fb31d0f?format=webp&width=800"],amenities:["Living Room","Kitchen","Two Bathrooms","Separate Bedrooms","Free WiFi","Climate Control"]},{id:"3",name:"Scenic Garden Room",capacity:2,beds:1,description:"Relaxing retreat with beautiful garden views. Queen bed, ensuite bathroom, and direct access to landscaped gardens.",images:["https://cdn.builder.io/api/v1/image/assets%2F7efc470fe57f4b95b600ae20623acb83%2F9ae710d8f1ed4e49b9b727c33fb31d0f?format=webp&width=800","https://cdn.builder.io/api/v1/image/assets%2F7efc470fe57f4b95b600ae20623acb83%2Ffa4d03405a5f4af6a0fb140a86159812?format=webp&width=800","https://cdn.builder.io/api/v1/image/assets%2F7efc470fe57f4b95b600ae20623acb83%2F1966ee8babb94437812b351eb3246c8a?format=webp&width=800"],amenities:["Garden View","Queen Bed","Ensuite Bath","Free WiFi","Work Desk","Safe"]},{id:"4",name:"Twin Canopy Room",capacity:2,beds:2,description:"Charming room with twin beds and elegant canopy. Perfect for guests who prefer separate beds with upscale comfort.",images:["https://cdn.builder.io/api/v1/image/assets%2F7efc470fe57f4b95b600ae20623acb83%2F1b6d237b133545e0a2545b1e1c9b39ec?format=webp&width=800","https://cdn.builder.io/api/v1/image/assets%2F7efc470fe57f4b95b600ae20623acb83%2F9ae710d8f1ed4e49b9b727c33fb31d0f?format=webp&width=800","https://cdn.builder.io/api/v1/image/assets%2F7efc470fe57f4b95b600ae20623acb83%2Ffa4d03405a5f4af6a0fb140a86159812?format=webp&width=800"],amenities:["Twin Beds","Canopy Design","Shower","Free WiFi","Ceiling Fan","Modern Decor"]}];function o(){let[e,a]=(0,l.useState)("1"),[s,i]=(0,l.useState)(1),[o,c]=(0,l.useState)({0:""}),[d,m]=(0,l.useState)([]),[u,b]=(0,l.useState)(null),[f,p]=(0,l.useState)(!1),[h,g]=(0,l.useState)(!0),x=["Bed Only","Bed and Breakfast","Half Board","Full Board"],[N,j]=(0,l.useState)("Bed Only"),[y,v]=(0,l.useState)(""),[w,F]=(0,l.useState)(""),[k,S]=(0,l.useState)([]),[D,T]=(0,l.useState)({}),_=e=>{let a=6e4*e.getTimezoneOffset();return new Date(e.getTime()-a).toISOString().slice(0,10)},C=(e,a)=>{let s=new Date(e+"T00:00:00");return s.setDate(s.getDate()+a),_(s)},[B,O]=(0,l.useState)(""),[E,P]=(0,l.useState)("");(0,l.useEffect)(()=>{let e=_(new Date);O(e),P(C(e,1)),async function(){try{let e=await fetch("/api/room-types"),a=await e.json();a.types&&a.types.length>0&&(m(a.types),c({0:a.types[0]}))}catch(e){console.error("Failed to fetch room types:",e)}finally{g(!1)}}()},[]);let q=n.find(a=>a.id===e);function R(e,a){if(!e||!a)return[];let s=new Date(e+"T00:00:00"),t=new Date(a+"T00:00:00"),i=[];for(let e=new Date(s);e<t;e.setDate(e.getDate()+1))i.push(e.toISOString().slice(0,10));return i}function V(e,a){let s={};for(let t of a)s[t]=e;T(s)}let W=(e,a)=>{c(s=>({...s,[e]:a}))};async function J(e){e.preventDefault(),b(null),p(!0);let a=B||_(new Date);if(!y||!w){p(!1),b("Please select both check-in and check-out dates.");return}if(y<a){p(!1),b("Please select a check-in date that is today or later.");return}if(w<=y){p(!1),b("Check-out must be at least one day after check-in.");return}let s=Object.fromEntries(new FormData(e.currentTarget).entries());s.room_types=JSON.stringify(o);let t=k.map(e=>({date:e,board_type:D[e]||N}));s.board_plan=JSON.stringify(t);try{let a=await fetch("/api/booking",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),t=await a.json();p(!1),b(t.message),a.ok&&e.currentTarget.reset()}catch(e){p(!1),b("Error submitting booking. Please try again.")}}return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r(),{children:(0,t.jsx)("title",{children:"Booking | Epashikino"})}),(0,t.jsx)("div",{className:"booking-page",children:(0,t.jsxs)("div",{className:"booking-container",children:[(0,t.jsxs)("div",{className:"booking-header",children:[(0,t.jsx)("h1",{className:"booking-title",children:"Book Your Stay"}),(0,t.jsx)("p",{className:"booking-subtitle",children:"Select a room and fill in your details to make a reservation"})]}),(0,t.jsxs)("div",{className:"booking-layout",children:[(0,t.jsx)("div",{className:"rooms-section",children:(0,t.jsx)("div",{className:"gallery-grid-2x2",children:null==q?void 0:q.images.slice(0,4).map((e,a)=>(0,t.jsx)("div",{className:"gallery-cell",children:(0,t.jsx)("img",{src:e,alt:"Room ".concat(a+1),className:"gallery-image"})},a))})}),(0,t.jsx)("div",{className:"form-section-container",children:(0,t.jsxs)("form",{className:"booking-form",onSubmit:J,children:[(0,t.jsx)("input",{type:"hidden",name:"type",value:"room"}),(0,t.jsx)("input",{type:"hidden",name:"room_id",value:e}),(0,t.jsxs)("div",{className:"form-row",children:[(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"First Name *"}),(0,t.jsx)("input",{className:"form-input",name:"first_name",placeholder:"John",required:!0})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"Last Name *"}),(0,t.jsx)("input",{className:"form-input",name:"last_name",placeholder:"Doe",required:!0})]})]}),(0,t.jsxs)("div",{className:"form-row",children:[(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"Email *"}),(0,t.jsx)("input",{className:"form-input",type:"email",name:"email",placeholder:"you@example.com",required:!0})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"Phone Number *"}),(0,t.jsx)("input",{className:"form-input",name:"phone",placeholder:"+1 (555) 000-0000",required:!0})]})]}),(0,t.jsxs)("div",{className:"form-row",children:[(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"Check-in Date *"}),(0,t.jsx)("input",{className:"form-input",type:"date",name:"start_date",value:y,min:B,onChange:e=>{let a=e.target.value;B&&a&&a<B&&(a=B),v(a);let s=a?C(a,1):C(B||_(new Date),1);P(s),w&&w<=a&&F(s);let t=R(a,w&&w>a?w:s);S(t),V(N,t)},required:!0})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"Check-out Date *"}),(0,t.jsx)("input",{className:"form-input",type:"date",name:"end_date",value:w,min:E,onChange:e=>{let a=e.target.value,s=y||B,t=s?C(s,1):E;a&&s&&a<=s&&(a=t),F(a);let i=R(y||B,a);S(i),V(N,i)},required:!0})]})]}),k.length>0&&(0,t.jsxs)("div",{className:"room-types-section",children:[(0,t.jsx)("h4",{className:"room-types-label",children:"Board plan per night"}),(0,t.jsx)("div",{className:"room-types-grid",children:k.map(e=>(0,t.jsxs)("div",{className:"room-type-selector",children:[(0,t.jsx)("label",{className:"room-type-title",children:new Date(e).toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"})}),(0,t.jsx)("select",{className:"form-input",value:D[e]||N,onChange:a=>T(s=>({...s,[e]:a.target.value})),children:x.map(e=>(0,t.jsx)("option",{value:e,children:e},e))})]},e))})]}),(0,t.jsxs)("div",{className:"form-row",children:[(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"Number of Adults *"}),(0,t.jsx)("input",{className:"form-input",name:"adults",type:"number",placeholder:"1",min:1,required:!0})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"Number of Kids"}),(0,t.jsx)("input",{className:"form-input",name:"kids",type:"number",placeholder:"0",min:0,defaultValue:"0"})]})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"Number of Rooms *"}),(0,t.jsx)("input",{className:"form-input",name:"num_rooms",type:"number",placeholder:"1",min:1,value:s,onChange:e=>{let a=parseInt(e.target.value)||1;i(a);let s={};for(let e=0;e<a;e++)s[e]=o[e]||"double";c(s)},required:!0})]}),s>0&&(0,t.jsxs)("div",{className:"room-types-section",children:[(0,t.jsx)("h4",{className:"room-types-label",children:"Room Types"}),(0,t.jsx)("div",{className:"room-types-grid",children:Array.from({length:s}).map((e,a)=>(0,t.jsxs)("div",{className:"room-type-selector",children:[(0,t.jsxs)("label",{className:"room-type-title",children:["Room ",a+1]}),(0,t.jsxs)("select",{className:"form-input",value:o[a]||"",onChange:e=>W(a,e.target.value),disabled:0===d.length,children:[(0,t.jsx)("option",{value:"",children:"Select a room type"}),d.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]},a))})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{className:"form-label",children:"Special Requests"}),(0,t.jsx)("textarea",{className:"form-input form-textarea",name:"notes",placeholder:"Tell us about any special requests or preferences...",rows:4})]}),(0,t.jsx)("button",{className:"booking-submit-btn",disabled:f,type:"submit",children:f?"Processing...":"Complete Booking"}),u&&(0,t.jsx)("div",{className:"booking-status ".concat(u.includes("success")||u.includes("successfully")||u.includes("Thank you")?"success":"error"),children:u})]})})]})]})})]})}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=2385)}),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[882],{2385:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/booking",function(){return t(1008)}])},2692:function(e,a,t){"use strict";function i(e){let a=String(e||"").trim(),t=a.startsWith("+"),i=a.replace(/\D+/g,"");return i?t?"+".concat(i):i:""}function s(e){let a=i(e),t=a.startsWith("+")?a.slice(1):a;return!!/^[0-9]+$/.test(t)&&t.length>=7&&t.length<=15}function r(e){let a=String(e||"").trim();return/^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/.test(a)}t.d(a,{UK:function(){return i},kj:function(){return s},vV:function(){return r}})},1008:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return d}});var i=t(5893),s=t(9008),r=t.n(s),n=t(7294),o=t(6455),l=t.n(o),c=t(2692);let m=[{id:"1",name:"Deluxe Ocean View",capacity:2,beds:1,description:"Experience luxury with stunning ocean views. This spacious room features a king bed, marble bathroom, and a private balcony overlooking the sea.",images:["https://cdn.builder.io/api/v1/image/assets%2F7efc470fe57f4b95b600ae20623acb83%2F1966ee8babb94437812b351eb3246c8a?format=webp&width=800","https://cdn.builder.io/api/v1/image/assets%2F7efc470fe57f4b95b600ae20623acb83%2Ffa4d03405a5f4af6a0fb140a86159812?format=webp&width=800","https://cdn.builder.io/api/v1/image/assets%2F7efc470fe57f4b95b600ae20623acb83%2F1b6d237b133545e0a2545b1e1c9b39ec?format=webp&width=800"],amenities:["Ocean View","Air Conditioning","Free WiFi","Flat Screen TV","Mini Bar","Premium Toiletries"]},{id:"2",name:"Family Suite",capacity:4,beds:2,description:"Perfect for families and groups. Two bedrooms, spacious living area, and modern amenities for a comfortable stay.",images:["https://cdn.builder.io/api/v1/image/assets%2F7efc470fe57f4b95b600ae20623acb83%2Ffa4d03405a5f4af6a0fb140a86159812?format=webp&width=800","https://cdn.builder.io/api/v1/image/assets%2F7efc470fe57f4b95b600ae20623acb83%2F1966ee8babb94437812b351eb3246c8a?format=webp&width=800","https://cdn.builder.io/api/v1/image/assets%2F7efc470fe57f4b95b600ae20623acb83%2F9ae710d8f1ed4e49b9b727c33fb31d0f?format=webp&width=800"],amenities:["Living Room","Kitchen","Two Bathrooms","Separate Bedrooms","Free WiFi","Climate Control"]},{id:"3",name:"Scenic Garden Room",capacity:2,beds:1,description:"Relaxing retreat with beautiful garden views. Queen bed, ensuite bathroom, and direct access to landscaped gardens.",images:["https://cdn.builder.io/api/v1/image/assets%2F7efc470fe57f4b95b600ae20623acb83%2F9ae710d8f1ed4e49b9b727c33fb31d0f?format=webp&width=800","https://cdn.builder.io/api/v1/image/assets%2F7efc470fe57f4b95b600ae20623acb83%2Ffa4d03405a5f4af6a0fb140a86159812?format=webp&width=800","https://cdn.builder.io/api/v1/image/assets%2F7efc470fe57f4b95b600ae20623acb83%2F1966ee8babb94437812b351eb3246c8a?format=webp&width=800"],amenities:["Garden View","Queen Bed","Ensuite Bath","Free WiFi","Work Desk","Safe"]},{id:"4",name:"Twin Canopy Room",capacity:2,beds:2,description:"Charming room with twin beds and elegant canopy. Perfect for guests who prefer separate beds with upscale comfort.",images:["https://cdn.builder.io/api/v1/image/assets%2F7efc470fe57f4b95b600ae20623acb83%2F1b6d237b133545e0a2545b1e1c9b39ec?format=webp&width=800","https://cdn.builder.io/api/v1/image/assets%2F7efc470fe57f4b95b600ae20623acb83%2F9ae710d8f1ed4e49b9b727c33fb31d0f?format=webp&width=800","https://cdn.builder.io/api/v1/image/assets%2F7efc470fe57f4b95b600ae20623acb83%2Ffa4d03405a5f4af6a0fb140a86159812?format=webp&width=800"],amenities:["Twin Beds","Canopy Design","Shower","Free WiFi","Ceiling Fan","Modern Decor"]}];function d(){let[e,a]=(0,n.useState)("1"),[t,s]=(0,n.useState)(1),[o,d]=(0,n.useState)({0:""}),[f,u]=(0,n.useState)([]),[b,p]=(0,n.useState)(null),[h,g]=(0,n.useState)(!1),[x,v]=(0,n.useState)(!0),N=["Bed Only","Bed and Breakfast","Half Board","Full Board"],[j,w]=(0,n.useState)("Bed Only"),[y,k]=(0,n.useState)(""),[F,S]=(0,n.useState)(""),[T,B]=(0,n.useState)([]),[D,_]=(0,n.useState)({}),O=e=>{let a=6e4*e.getTimezoneOffset();return new Date(e.getTime()-a).toISOString().slice(0,10)},C=(e,a)=>{let t=new Date(e+"T00:00:00");return t.setDate(t.getDate()+a),O(t)},[P,q]=(0,n.useState)(""),[E,K]=(0,n.useState)("");(0,n.useEffect)(()=>{let e=O(new Date);q(e),K(C(e,1)),async function(){try{let e=await fetch("/api/room-types"),a=await e.json();a.types&&a.types.length>0&&(u(a.types),d({0:a.types[0]}))}catch(e){console.error("Failed to fetch room types:",e)}finally{v(!1)}}()},[]);let R=m.find(a=>a.id===e);function I(e,a){if(!e||!a)return[];let t=new Date(e+"T00:00:00"),i=new Date(a+"T00:00:00"),s=[];for(let e=new Date(t);e<i;e.setDate(e.getDate()+1))s.push(e.toISOString().slice(0,10));return s}function V(e,a){let t={};for(let i of a)t[i]=e;_(t)}let W=(e,a)=>{d(t=>({...t,[e]:a}))};async function A(e){var a,t;e.preventDefault(),p(null),g(!0);let i=P||O(new Date);if(!y||!F){g(!1),await l().fire({title:"Missing dates",text:"Please select both check-in and check-out dates.",icon:"error",confirmButtonText:"OK"});return}if(y<i){g(!1),await l().fire({title:"Invalid check-in",text:"Please select a check-in date that is today or later.",icon:"error",confirmButtonText:"OK"});return}if(F<=y){g(!1),await l().fire({title:"Invalid check-out",text:"Check-out must be at least one day after check-in.",icon:"error",confirmButtonText:"OK"});return}let s=e.currentTarget,r=Object.fromEntries(new FormData(s).entries());r.room_types=JSON.stringify(o);let n=T.map(e=>({date:e,board_type:D[e]||j}));r.board_plan=JSON.stringify(n),r.guests=r.adults||r.guests,r.children=null!==(a=r.kids)&&void 0!==a?a:r.children,r.rooms=null!==(t=r.num_rooms)&&void 0!==t?t:r.rooms,/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(String(r.room_id||""))||delete r.room_id;let m=String(r.email||"").trim(),d=String(r.phone||"").trim();if(!(0,c.vV)(m)){g(!1),await l().fire({title:"Invalid email",text:"Please enter a valid email address.",icon:"error",confirmButtonText:"OK"});return}if(!(0,c.kj)(d)){g(!1),await l().fire({title:"Invalid phone",text:"Please enter a valid phone number.",icon:"error",confirmButtonText:"OK"});return}r.email=m,r.phone=(0,c.UK)(d);let f=await fetch("/api/booking",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),u=await f.json();if(g(!1),f.ok){s.reset();try{await l().fire({title:"Booking confirmed",text:u.message,icon:"success",confirmButtonText:"OK"})}catch(e){}}else await l().fire({title:"Booking failed",text:u.message||"An error occurred while submitting your booking.",icon:"error",confirmButtonText:"OK"})}return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r(),{children:(0,i.jsx)("title",{children:"Booking | Epashikino"})}),(0,i.jsx)("div",{className:"booking-page",children:(0,i.jsxs)("div",{className:"booking-container",children:[(0,i.jsxs)("div",{className:"booking-header",children:[(0,i.jsx)("h1",{className:"booking-title",children:"Book Your Stay"}),(0,i.jsx)("p",{className:"booking-subtitle",children:"Select a room and fill in your details to make a reservation"})]}),(0,i.jsxs)("div",{className:"booking-layout",children:[(0,i.jsx)("div",{className:"rooms-section",children:(0,i.jsx)("div",{className:"gallery-grid-2x2",children:null==R?void 0:R.images.slice(0,4).map((e,a)=>(0,i.jsx)("div",{className:"gallery-cell",children:(0,i.jsx)("img",{src:e,alt:"Room ".concat(a+1),className:"gallery-image"})},a))})}),(0,i.jsx)("div",{className:"form-section-container",children:(0,i.jsxs)("form",{className:"booking-form",onSubmit:A,children:[(0,i.jsx)("input",{type:"hidden",name:"room_id",value:e}),(0,i.jsxs)("div",{className:"form-row",children:[(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{className:"form-label",children:"First Name *"}),(0,i.jsx)("input",{className:"form-input",name:"first_name",placeholder:"John",required:!0})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{className:"form-label",children:"Last Name *"}),(0,i.jsx)("input",{className:"form-input",name:"last_name",placeholder:"Doe",required:!0})]})]}),(0,i.jsxs)("div",{className:"form-row",children:[(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{className:"form-label",children:"Email *"}),(0,i.jsx)("input",{className:"form-input",type:"email",name:"email",placeholder:"you@example.com",required:!0})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{className:"form-label",children:"Phone Number"}),(0,i.jsx)("input",{className:"form-input",name:"phone",placeholder:"+1 (555) 000-0000",inputMode:"tel",required:!0})]})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{className:"form-label",children:"Nationality *"}),(0,i.jsx)("input",{className:"form-input",name:"nationality",placeholder:"Country",required:!0})]}),(0,i.jsxs)("div",{className:"form-row",children:[(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{className:"form-label",children:"Check-in Date *"}),(0,i.jsx)("input",{className:"form-input",type:"date",name:"start_date",value:y,min:P,onChange:e=>{let a=e.target.value;P&&a&&a<P&&(a=P),k(a);let t=a?C(a,1):C(P||O(new Date),1);K(t),F&&F<=a&&S(t);let i=I(a,F&&F>a?F:t);B(i),V(j,i)},required:!0})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{className:"form-label",children:"Check-out Date *"}),(0,i.jsx)("input",{className:"form-input",type:"date",name:"end_date",value:F,min:E,onChange:e=>{let a=e.target.value,t=y||P,i=t?C(t,1):E;a&&t&&a<=t&&(a=i),S(a);let s=I(y||P,a);B(s),V(j,s)},required:!0})]})]}),T.length>0&&(0,i.jsxs)("div",{className:"room-types-section",children:[(0,i.jsx)("h4",{className:"room-types-label",children:"Board plan per night"}),(0,i.jsx)("div",{className:"room-types-grid",children:T.map(e=>(0,i.jsxs)("div",{className:"room-type-selector",children:[(0,i.jsx)("label",{className:"room-type-title",children:new Date(e).toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"})}),(0,i.jsx)("select",{className:"form-input",value:D[e]||j,onChange:a=>_(t=>({...t,[e]:a.target.value})),children:N.map(e=>(0,i.jsx)("option",{value:e,children:e},e))})]},e))})]}),(0,i.jsxs)("div",{className:"form-row",children:[(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{className:"form-label",children:"Number of Adults *"}),(0,i.jsx)("input",{className:"form-input",name:"adults",type:"number",placeholder:"1",min:1,required:!0})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{className:"form-label",children:"Number of Kids"}),(0,i.jsx)("input",{className:"form-input",name:"kids",type:"number",placeholder:"0",min:0,defaultValue:"0"})]})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{className:"form-label",children:"Number of Rooms *"}),(0,i.jsx)("input",{className:"form-input",name:"num_rooms",type:"number",placeholder:"1",min:1,value:t,onChange:e=>{let a=parseInt(e.target.value)||1;s(a);let t={};for(let e=0;e<a;e++)t[e]=o[e]||"double";d(t)},required:!0})]}),t>0&&(0,i.jsxs)("div",{className:"room-types-section",children:[(0,i.jsx)("h4",{className:"room-types-label",children:"Room Types"}),(0,i.jsx)("div",{className:"room-types-grid",children:Array.from({length:t}).map((e,a)=>(0,i.jsxs)("div",{className:"room-type-selector",children:[(0,i.jsxs)("label",{className:"room-type-title",children:["Room ",a+1]}),(0,i.jsxs)("select",{className:"form-input",value:o[a]||"",onChange:e=>W(a,e.target.value),disabled:0===f.length,children:[(0,i.jsx)("option",{value:"",children:"Select a room type"}),f.map(e=>(0,i.jsx)("option",{value:e,children:e},e))]})]},a))})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{className:"form-label",children:"Special Requests"}),(0,i.jsx)("textarea",{className:"form-input form-textarea",name:"notes",placeholder:"Tell us about any special requests or preferences...",rows:4})]}),(0,i.jsx)("button",{className:"booking-submit-btn",disabled:h,type:"submit",children:h?"Processing...":"Complete Booking"})]})})]})]})})]})}}},function(e){e.O(0,[166,888,774,179],function(){return e(e.s=2385)}),_N_E=e.O()}]);
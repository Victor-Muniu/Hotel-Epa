(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[681],{2186:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/bookings",function(){return n(8394)}])},9814:function(e,s,n){"use strict";n.d(s,{S:function(){return i}});var l=n(1608);let a="https://uhxofvlffmkrlqvbisil.supabase.co",t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVoeG9mdmxmZm1rcmxxdmJpc2lsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU0MzgxMDYsImV4cCI6MjA3MTAxNDEwNn0.ZQDbpQqWb8CVhAjWxdwPr3RH_wDQTChVDplQVd_NlEI",c=null;function i(){return c||a&&t&&(c=(0,l.eI)(a,t)),c}},8394:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return o}});var l=n(5893),a=n(9008),t=n.n(a),c=n(1664),i=n.n(c),r=n(7294),d=n(9814);function o(){let[e,s]=(0,r.useState)([]),[n,a]=(0,r.useState)(!0),[c,o]=(0,r.useState)("all"),[h,m]=(0,r.useState)("");(0,r.useEffect)(()=>{!async function(){a(!0);let e=(0,d.S)();if(!e){a(!1);return}try{let n=e.from("bookings").select("*").order("created_at",{ascending:!1});"all"!==c&&(n=n.eq("status",c)),h&&(n=n.ilike("email","%".concat(h,"%")));let{data:l,error:a}=await n;if(a)throw a;s(l||[])}catch(e){console.error("Error fetching bookings:",e)}finally{a(!1)}}()},[c,h]);let u=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),x=e=>{switch(e){case"confirmed":return"badge-confirmed";case"pending":return"badge-pending";case"cancelled":return"badge-cancelled";case"checked_in":return"badge-checkedin";case"checked_out":return"badge-checkedout";default:return"badge-default"}},j=(e,s)=>{let n=new Date(e);return Math.ceil((new Date(s).getTime()-n.getTime())/864e5)};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(t(),{children:[(0,l.jsx)("title",{children:"Bookings | Epashikino Resort & Spa"}),(0,l.jsx)("meta",{name:"description",content:"View and manage all bookings."})]}),(0,l.jsx)("main",{className:"listing-page",children:(0,l.jsxs)("div",{className:"listing-container",children:[(0,l.jsxs)("header",{className:"listing-header",children:[(0,l.jsx)("h1",{className:"listing-eyebrow",children:"Epashikino Resort & Spa"}),(0,l.jsx)("h2",{className:"listing-title",children:"Booking Management"}),(0,l.jsx)("p",{className:"listing-subtitle",children:"View and track all room bookings"})]}),(0,l.jsxs)("section",{className:"bookings-section",children:[(0,l.jsxs)("div",{className:"bookings-controls",children:[(0,l.jsxs)("div",{className:"bookings-filter",children:[(0,l.jsx)("label",{className:"form-label",children:"Status Filter"}),(0,l.jsxs)("select",{className:"input",value:c,onChange:e=>o(e.target.value),children:[(0,l.jsx)("option",{value:"all",children:"All Bookings"}),(0,l.jsx)("option",{value:"pending",children:"Pending"}),(0,l.jsx)("option",{value:"confirmed",children:"Confirmed"}),(0,l.jsx)("option",{value:"cancelled",children:"Cancelled"}),(0,l.jsx)("option",{value:"checked_in",children:"Checked In"}),(0,l.jsx)("option",{value:"checked_out",children:"Checked Out"})]})]}),(0,l.jsxs)("div",{className:"bookings-search",children:[(0,l.jsx)("label",{className:"form-label",children:"Search by Email"}),(0,l.jsx)("input",{className:"input",type:"email",placeholder:"guest@example.com",value:h,onChange:e=>m(e.target.value)})]}),(0,l.jsxs)("div",{className:"bookings-count",children:[(0,l.jsx)("span",{className:"count-label",children:"Total Bookings:"}),(0,l.jsx)("span",{className:"count-number",children:e.length})]})]}),n?(0,l.jsx)("p",{className:"section-title",children:"Loading bookings..."}):0===e.length?(0,l.jsx)("p",{className:"section-title",children:"No bookings found."}):(0,l.jsx)("div",{className:"bookings-table-wrapper",children:(0,l.jsxs)("table",{className:"bookings-table",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Guest Name"}),(0,l.jsx)("th",{children:"Email"}),(0,l.jsx)("th",{children:"Phone"}),(0,l.jsx)("th",{children:"Check-in"}),(0,l.jsx)("th",{children:"Check-out"}),(0,l.jsx)("th",{children:"Nights"}),(0,l.jsx)("th",{children:"Guests"}),(0,l.jsx)("th",{children:"Board Type"}),(0,l.jsx)("th",{children:"Total Price"}),(0,l.jsx)("th",{children:"Status"}),(0,l.jsx)("th",{children:"Booking Date"})]})}),(0,l.jsx)("tbody",{children:e.map(e=>(0,l.jsxs)("tr",{className:"booking-row",children:[(0,l.jsxs)("td",{className:"cell-name",children:[e.first_name," ",e.last_name]}),(0,l.jsx)("td",{className:"cell-email",children:e.email}),(0,l.jsx)("td",{className:"cell-phone",children:e.phone||"-"}),(0,l.jsx)("td",{className:"cell-date",children:u(e.start_date)}),(0,l.jsx)("td",{className:"cell-date",children:u(e.end_date)}),(0,l.jsx)("td",{className:"cell-center",children:j(e.start_date,e.end_date)}),(0,l.jsxs)("td",{className:"cell-center",children:[e.guests,e.children>0?" + ".concat(e.children):""]}),(0,l.jsx)("td",{className:"cell-board",children:e.board_type||"-"}),(0,l.jsx)("td",{className:"cell-price",children:e.total_price?"$".concat(e.total_price.toFixed(2)):"-"}),(0,l.jsx)("td",{className:"cell-status",children:(0,l.jsx)("span",{className:"status-badge ".concat(x(e.status)),children:e.status})}),(0,l.jsx)("td",{className:"cell-date",children:u(e.created_at)})]},e.id))})]})})]}),(0,l.jsxs)("nav",{className:"listing-bottom-nav","aria-label":"Navigation",children:[(0,l.jsx)(i(),{className:"btn btn-outline",href:"/rooms-list",children:"View Rooms"}),(0,l.jsx)(i(),{className:"btn btn-outline",href:"/",children:"Back to Home"})]})]})})]})}}},function(e){e.O(0,[608,888,774,179],function(){return e(e.s=2186)}),_N_E=e.O()}]);
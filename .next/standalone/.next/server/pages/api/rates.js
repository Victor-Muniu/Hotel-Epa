"use strict";(()=>{var e={};e.id=199,e.ids=[199],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6249:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,r){return r in t?t[r]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,r)):"function"==typeof t&&"default"===r?t:void 0}}})},5645:(e,t,r)=>{r.r(t),r.d(t,{config:()=>d,default:()=>s,routeModule:()=>f});var a={};r.r(a),r.d(a,{default:()=>i});var n=r(1802),l=r(7153),u=r(6249),o=r(5754);async function i(e,t){if("GET"!==e.method)return t.setHeader("Allow","GET"),t.status(405).json({error:"Method Not Allowed"});try{let a=String(e.query.type||e.query.room_type||"").trim();if(!a)return t.status(400).json({error:"type is required"});let n=(0,o.S)();if(!n)return t.status(500).json({error:"Supabase not configured"});let{data:l,error:u}=await n.from("hotel_rooms").select("rate_bed_only, rate_bed_and_breakfast, rate_half_board, rate_full_board, status, type").eq("type",a).eq("status","available");if(u)return t.status(500).json({error:u.message});function r(e){if(null==e||""===e)return null;let t=Number(e);return Number.isFinite(t)?t:null}let i=(l||[]).reduce((e,t)=>{let a=r(t.rate_bed_only),n=r(t.rate_bed_and_breakfast),l=r(t.rate_half_board),u=r(t.rate_full_board);return null!=a&&(e.bed_only=Math.min(e.bed_only??a,a)),null!=n&&(e.bed_and_breakfast=Math.min(e.bed_and_breakfast??n,n)),null!=l&&(e.half_board=Math.min(e.half_board??l,l)),null!=u&&(e.full_board=Math.min(e.full_board??u,u)),e},{bed_only:null,bed_and_breakfast:null,half_board:null,full_board:null});return t.status(200).json({type:a,rates:i})}catch(e){return t.status(500).json({error:"Failed to fetch rates"})}}let s=(0,u.l)(a,"default"),d=(0,u.l)(a,"config"),f=new n.PagesAPIRouteModule({definition:{kind:l.x.PAGES_API,page:"/api/rates",pathname:"/api/rates",bundlePath:"",filename:""},userland:a})},5754:(e,t,r)=>{r.d(t,{S:()=>o});let a=require("@supabase/supabase-js"),n="https://uhxofvlffmkrlqvbisil.supabase.co",l="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVoeG9mdmxmZm1rcmxxdmJpc2lsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU0MzgxMDYsImV4cCI6MjA3MTAxNDEwNn0.ZQDbpQqWb8CVhAjWxdwPr3RH_wDQTChVDplQVd_NlEI",u=null;function o(){return u||n&&l&&(u=(0,a.createClient)(n,l)),u}},7153:(e,t)=>{var r;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return r}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(r||(r={}))},1802:(e,t,r)=>{e.exports=r(145)}};var t=require("../../webpack-api-runtime.js");t.C(e);var r=t(t.s=5645);module.exports=r})();